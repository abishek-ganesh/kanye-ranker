/* Browser-Specific Button Fixes for Comparison Footer */

/* Base styles for all browsers */
.comparison-footer {
    text-align: center !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 15px !important;
    width: 100% !important;
    min-height: 120px !important;
    padding: 20px 0 !important;
}

/* Base button styles */
#skip-comparison,
#show-results {
    /* Reset all potential problem properties */
    position: relative !important;
    transform: none !important;
    -webkit-transform: none !important;
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease !important;
    /* Remove all transform transitions */
    transition-property: background-color, border-color, color !important;
    will-change: background-color, border-color, color !important;
    /* Fixed dimensions */
    box-sizing: border-box !important;
    display: inline-block !important;
    text-align: center !important;
    margin: 0 auto !important;
    /* Prevent text wrapping */
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* Ensure consistent button order */
#show-results {
    order: 1 !important;
}

#skip-comparison {
    order: 2 !important;
}

/* Safari Desktop Specific Fixes */
@media not all and (min-resolution:.001dpcm) {
    @supports (-webkit-appearance:none) {
        #skip-comparison,
        #show-results {
            /* Disable all transforms for Safari */
            transform: none !important;
            -webkit-transform: none !important;
            /* Use translate3d(0,0,0) to trigger hardware acceleration without movement */
            -webkit-transform: translate3d(0,0,0) !important;
            transform: translate3d(0,0,0) !important;
            /* Prevent any transition on transform */
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease !important;
            -webkit-transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease !important;
            /* Force GPU acceleration */
            -webkit-backface-visibility: hidden !important;
            backface-visibility: hidden !important;
            perspective: 1000px !important;
        }
        
        #skip-comparison:hover,
        #show-results:hover {
            transform: translate3d(0,0,0) !important;
            -webkit-transform: translate3d(0,0,0) !important;
        }
    }
}

/* Chrome-specific fixes */
@media screen and (-webkit-min-device-pixel-ratio:0) and (min-resolution:.001dpcm) {
    #skip-comparison,
    #show-results {
        /* Ensure no transform issues in Chrome */
        transform: translateZ(0) !important;
        -webkit-transform: translateZ(0) !important;
    }
}

/* Mobile-specific fixes for all browsers */
@media (max-width: 768px) {
    .comparison-footer {
        padding: 15px 20px 20px !important;
        gap: 12px !important;
        min-height: auto !important;
    }
    
    #skip-comparison,
    #show-results {
        /* Fixed mobile dimensions */
        width: 100% !important;
        max-width: 280px !important;
        min-width: 200px !important;
        height: 44px !important;
        line-height: 44px !important;
        padding: 0 20px !important;
        margin: 0 auto !important;
        font-size: 14px !important;
        /* Ensure centering */
        display: block !important;
        position: relative !important;
        left: 0 !important;
        right: 0 !important;
        transform: none !important;
        -webkit-transform: none !important;
        /* Prevent any text size changes */
        -webkit-text-size-adjust: 100% !important;
        text-size-adjust: 100% !important;
        /* Disable tap highlights */
        -webkit-tap-highlight-color: transparent !important;
        /* Prevent zoom on tap */
        touch-action: manipulation !important;
    }
    
    /* Prevent any state changes that could cause movement */
    #skip-comparison:hover,
    #skip-comparison:active,
    #skip-comparison:focus,
    #show-results:hover,
    #show-results:active,
    #show-results:focus {
        transform: none !important;
        -webkit-transform: none !important;
        width: 100% !important;
        max-width: 280px !important;
        height: 44px !important;
        font-size: 14px !important;
        line-height: 44px !important;
        position: relative !important;
        left: 0 !important;
        right: 0 !important;
    }
}

/* Safari Mobile Specific */
@supports (-webkit-touch-callout: none) {
    @media (max-width: 768px) {
        #skip-comparison,
        #show-results {
            /* Prevent Safari mobile text size adjustments */
            -webkit-text-size-adjust: 100% !important;
            text-size-adjust: 100% !important;
            /* Fixed font size that won't change */
            font-size: 14px !important;
            /* Prevent font boosting */
            max-height: 999999px !important;
            /* Disable all text selection and callouts */
            -webkit-touch-callout: none !important;
            -webkit-user-select: none !important;
            user-select: none !important;
        }
        
        /* Force consistent text size on all states */
        #skip-comparison:active,
        #show-results:active {
            font-size: 14px !important;
            -webkit-text-size-adjust: 100% !important;
            zoom: 1 !important;
        }
    }
}

/* Additional mobile touch state fixes */
@media (hover: none) and (pointer: coarse) {
    #skip-comparison,
    #show-results {
        /* Use opacity for feedback instead of transform */
        transition: opacity 0.1s ease, background-color 0.2s ease !important;
    }
    
    #skip-comparison:active,
    #show-results:active {
        opacity: 0.9 !important;
        transform: none !important;
        -webkit-transform: none !important;
    }
}

/* Firefox-specific adjustments */
@-moz-document url-prefix() {
    #skip-comparison,
    #show-results {
        /* Ensure Firefox doesn't add any unexpected transforms */
        transform: none !important;
        position: relative !important;
    }
}

/* High-contrast mode support */
@media (prefers-contrast: high) {
    #skip-comparison,
    #show-results {
        border-width: 3px !important;
    }
}

/* Print styles to ensure no issues */
@media print {
    .comparison-footer {
        display: none !important;
    }
}